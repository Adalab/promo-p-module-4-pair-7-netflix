(this["webpackJsonpmodulo-3-repaso-final"]=this["webpackJsonpmodulo-3-repaso-final"]||[]).push([[0],{30:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(14),o=s.n(a),c=s(8),i=s(3),r=s(2),l=s(0),u=function(e){return Object(l.jsxs)("header",{className:"col2 border--medium header",children:[Object(l.jsx)(c.b,{className:"nav__link",to:"/",children:Object(l.jsx)("img",{src:"//localhost:4000/fullLogo_netflix.png",alt:"Logo Netflix",className:"header__title"})}),Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{className:"header__menu",children:[Object(l.jsx)("li",{className:"nav__item",children:Object(l.jsx)(c.b,{className:"nav__link",to:"/",children:"Inicio"})}),function(){if(!1===e.isUserLogged)return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{className:"nav__link",to:"/login",children:"Login"})}),Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{className:"nav__link",to:"/signup",children:"Registro"})})]})}(),function(){if(!0===e.isUserLogged)return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/profile",children:"Mi perfil"})}),Object(l.jsx)("li",{children:Object(l.jsx)(c.b,{to:"/my-movies",children:"Mis pel\xedculas"})}),Object(l.jsx)("li",{className:"close",children:Object(l.jsx)("span",{onClick:e.logout,children:"Cerrar sesi\xf3n"})})]})}()]})})]})},j=function(e){var t=function(){return e.movies.map((function(e){return Object(l.jsxs)("li",{className:"card",children:[Object(l.jsx)("img",{src:"//localhost:4000/Logo_netflix.png",alt:"Logo Netflix",className:"card__logo"}),Object(l.jsx)("img",{className:"card__img",src:e.image,alt:"Car\xe1tula de ".concat(e.title)}),Object(l.jsx)("h3",{className:"card__title uppercase",children:e.title})]},e.id)}))};return e.movies.length?Object(l.jsx)("ul",{className:"cards",children:t()}):Object(l.jsx)("p",{children:"No hay pel\xedculas en este listado"})},d=function(e){var t=function(t){e.handleAllMoviesOptions({value:t.target.value,key:t.target.name})};return Object(l.jsxs)("section",{className:"main",children:[Object(l.jsx)("h1",{className:"title",children:"Estas son todas las pel\xedculas de nuestro cat\xe1logo"}),Object(l.jsxs)("form",{className:"form",children:[Object(l.jsxs)("div",{className:"form__filterGender",children:[Object(l.jsx)("label",{htmlFor:"filterGender",children:"Filtrar por g\xe9nero"}),Object(l.jsxs)("select",{className:"select",id:"filterGender",name:"gender",value:e.allMoviesOptionGender,onChange:t,children:[Object(l.jsx)("option",{className:"select__option",value:"",children:"Todas"}),Object(l.jsx)("option",{className:"select__option",value:"Drama",children:"Drama"}),Object(l.jsx)("option",{className:"select__option",value:"Comedia",children:"Comedia"})]})]}),Object(l.jsxs)("div",{className:"form__sort",children:[Object(l.jsx)("label",{children:"Ordernar:"}),Object(l.jsxs)("label",{className:"labelMovies",children:["A-Z",Object(l.jsx)("input",{className:"radio",type:"radio",name:"sort",value:"asc",checked:"asc"===e.allMoviesOptionSort,onChange:t})]}),Object(l.jsxs)("label",{className:"labelMovies",children:["Z-A",Object(l.jsx)("input",{className:"radio",type:"radio",name:"sort",value:"desc",checked:"desc"===e.allMoviesOptionSort,onChange:t})]})]})]}),Object(l.jsx)(j,{movies:e.movies})]})},m=function(e){return Object(l.jsxs)("section",{children:[Object(l.jsx)("h1",{className:"title",children:"Estas son todas tus pel\xedculas"}),Object(l.jsx)(j,{movies:e.movies})]})},b=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],o=s[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),u=r[0],j=r[1];return Object(l.jsxs)("section",{className:"login",children:[Object(l.jsx)("h1",{className:"title",children:"Identif\xedcate"}),Object(l.jsxs)("form",{className:"formLogin",onSubmit:function(t){t.preventDefault(),e.sendLoginToApi({email:a,password:u})},children:[Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"email",children:"Escribe tu email"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"email",id:"email",value:a,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"password",children:"Escribe tu contrase\xf1a"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"password",id:"password",value:u,onChange:function(e){j(e.target.value)}}),Object(l.jsx)("input",{className:"button",type:"submit",value:"Entrar"}),function(){if(""!==e.loginErrorMessage)return Object(l.jsxs)("p",{className:"errorMessage",children:["Error en el login: ",Object(l.jsx)("span",{className:"error",children:e.loginErrorMessage})]})}()]})]})},h=function(e){var t=Object(n.useState)(e.userName||""),s=Object(i.a)(t,2),a=s[0],o=s[1],c=Object(n.useState)(e.userEmail||""),r=Object(i.a)(c,2),u=r[0],j=r[1],d=Object(n.useState)(e.userPassword||""),m=Object(i.a)(d,2),b=m[0],h=m[1];return Object(l.jsxs)("section",{children:[Object(l.jsx)("h1",{className:"title",children:"Mi perfil"}),Object(l.jsxs)("form",{className:"formLogin",onSubmit:function(t){t.preventDefault();var s=localStorage.getItem("userId");e.sendProfileToApi(s,{name:a,email:u,password:b})},children:[Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"name",children:"Mi nombre"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"name",id:"name",value:a,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"email",children:"Mi email"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"email",id:"email",value:u,onChange:function(e){j(e.target.value)}}),Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"password",children:"Mi contrase\xf1a"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"password",id:"password",value:b,onChange:function(e){h(e.target.value)}}),Object(l.jsx)("input",{className:"button",type:"submit",value:"Guardar"})]})]})},p=function(e){var t=Object(n.useState)(""),s=Object(i.a)(t,2),a=s[0],o=s[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),u=r[0],j=r[1];return Object(l.jsxs)("section",{children:[Object(l.jsx)("h1",{className:"title",children:"Reg\xedstrate"}),Object(l.jsxs)("form",{className:"formLogin",onSubmit:function(t){t.preventDefault(),e.sendSingUpToApi({email:a,password:u})},children:[Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"email",children:"Escribe tu email"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"email",id:"email",value:a,onChange:function(e){o(e.target.value)}}),Object(l.jsx)("label",{className:"formLogin__label",htmlFor:"password",children:"Escribe tu contrase\xf1a"}),Object(l.jsx)("input",{className:"formLogin__input",type:"text",name:"password",id:"password",value:u,onChange:function(e){j(e.target.value)}}),Object(l.jsx)("input",{className:"button",type:"submit",value:"Registrar"}),function(){if(""!==e.signUpErrorMessage)return Object(l.jsxs)("p",{className:"errorMessage",children:["Error en el registro: ",Object(l.jsx)("span",{className:"error",children:e.signUpErrorMessage})]})}()]})]})},O={getMoviesFromApi:function(e){console.log("Se est\xe1n pidiendo las pel\xedculas de la app"),console.log(e);var t="gender=".concat(e.gender),s="sort=".concat(e.sort);return fetch("//localhost:4000/movies?".concat(t,"&").concat(s)).then((function(e){return e.json()})).then((function(e){return e}))}},f={sendLoginToApi:function(e){return console.log("Se est\xe1n enviando datos al login:",e),fetch("http://localhost:4000/login",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},sendSingUpToApi:function(e){return console.log("Se est\xe1n enviando datos al signup:",e),fetch("http://localhost:4000/sign-up",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},sendProfileToApi:function(e,t){console.log("Se est\xe1n enviando datos al profile:",e),console.log("data: ",t);var s={name:t.name,email:t.email,password:t.password};return fetch("http://localhost:4000/user/profile",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json","user-id":e}}).then((function(e){return e.json()})).then((function(e){return e}))},getProfileFromApi:function(e){return console.log("Se est\xe1n pidiendo datos del profile del usuario:",e),fetch("http://localhost:4000/user/profile",{headers:{"user-id":e}}).then((function(e){return e.json()})).then((function(e){return e}))},getUserMoviesFromApi:function(e){return console.log("Se est\xe1n pidiendo datos de las pel\xedculas de la usuaria:",e),fetch("http://localhost:4000/user/movies",{headers:{"user-id":e}}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))}},g={redirect:function(e){window.location.replace("#".concat(e))},reload:function(e){window.location.reload()}},x={get:function(e,t){var s=localStorage.getItem(e);return null===s?t:JSON.parse(s)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},v=(s(30),function(){var e=x.get("userId",""),t=Object(n.useState)(e),s=Object(i.a)(t,2),a=s[0],o=s[1],c=Object(n.useState)(""),j=Object(i.a)(c,2),v=j[0],N=j[1],_=Object(n.useState)(""),S=Object(i.a)(_,2),y=S[0],L=S[1],M=Object(n.useState)(""),w=Object(i.a)(M,2),A=w[0],E=w[1],F=Object(n.useState)([]),T=Object(i.a)(F,2),C=T[0],k=T[1],P=Object(n.useState)(""),U=Object(i.a)(P,2),I=U[0],J=U[1],G=Object(n.useState)(""),D=Object(i.a)(G,2),R=D[0],Z=D[1],q=Object(n.useState)([]),z=Object(i.a)(q,2),B=z[0],H=z[1],K=Object(n.useState)(""),Q=Object(i.a)(K,2),V=Q[0],W=Q[1],X=Object(n.useState)("asc"),Y=Object(i.a)(X,2),$=Y[0],ee=Y[1];Object(n.useEffect)((function(){var e={gender:V,sort:$};O.getMoviesFromApi(e).then((function(e){H(e.movies)}))}),[V,$]),Object(n.useEffect)((function(){""!==a&&f.getProfileFromApi(a).then((function(e){N(e.name),L(e.email),E(e.password)}))}),[a]),Object(n.useEffect)((function(){""!==a&&f.getUserMoviesFromApi(a).then((function(e){k(e.movies)}))}),[a]),Object(n.useEffect)((function(){o(a),x.set("userId",a)}),[a]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{isUserLogged:!!a,logout:function(){g.redirect("/"),g.reload(),o("")}}),Object(l.jsxs)(r.c,{children:[Object(l.jsx)(r.a,{exact:!0,path:"/",children:Object(l.jsx)(d,{movies:B,allMoviesOptionGender:V,allMoviesOptionSort:$,handleAllMoviesOptions:function(e){"gender"===e.key?W(e.value):"sort"===e.key&&ee(e.value)}})}),Object(l.jsx)(r.a,{path:"/my-movies",children:Object(l.jsx)(m,{movies:C})}),Object(l.jsx)(r.a,{path:"/login",children:Object(l.jsx)(b,{loginErrorMessage:I,sendLoginToApi:function(e){J(""),f.sendLoginToApi(e).then((function(e){!0===e.success?(o(e.userId),g.redirect("/")):J(e.errorMessage)}))}})}),Object(l.jsx)(r.a,{path:"/signup",children:Object(l.jsx)(p,{signUpErrorMessage:R,sendSingUpToApi:function(e){Z(""),f.sendSingUpToApi(e).then((function(e){!0===e.success?(o(e.userId),g.redirect("/")):Z(e.errorMessage)}))}})}),Object(l.jsx)(r.a,{path:"/profile",children:Object(l.jsx)(h,{userName:v,userEmail:y,userPassword:A,sendProfileToApi:function(e,t){f.sendProfileToApi(e,t).then((function(){f.getProfileFromApi(e).then((function(e){N(e.name),L(e.email),E(e.password)}))}))}})})]})]})});o.a.render(Object(l.jsx)(c.a,{children:Object(l.jsx)(v,{})}),document.querySelector("#root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.24e0eff9.chunk.js.map